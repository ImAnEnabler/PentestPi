PentestPi
========
Setup a RaspberryPi as a dropbox for Pentesting
-----------------------------------------------
This was a small project by our little team to stand up a dropbox for pentesting. Something that we could drop in an environment, would listen on responder, collect any creds, and send outbound to our listener on the Internet. Because these are real creds, we needed them to be securely transmitted. We also need it to dial out and create a reverse SSH tunnel so that we can login from the Internet and get into the target environment. 

(Obligitory Legal) Please, for the love of pete, don't use this if you aren't authorized by the head of your target organization. It's not worth going to jail to prove you're a L33t h@x0r. Don't try this at home. 

-----

Initial configuration:

Installed Ubuntu 14. Update with:
* apt-get update
* apt-get upgrade
* apt-get dist-update


System changes made:
* Disabled ipv6 in /etc/sysctl.conf
* Installed ptf
*       github.com/trustedsec/ptf
*       To run, do ./ptf, then use modules/install_update_all
*       All tools get installed in /pentest/
* Installed cobaltstrike
* apt-get install tmux monit

Setup SSH Keys
Created dial-home for reverse SSH connection
        (as seen on http://www.tunnelsup.com/raspberry-pi-phoning-home-using-a-reverse-remote-ssh-tunnel)
        To use, it will try to connect to the server/port in ~/create_ssh_tunnel.sh


Setting up monit to watch services. Hopefully this will replace/resolve watchdog scripts and one-off setups for dialing home, uploading files, running responder, etc.
* Config is in /etc/monit/monitrc
* sudo monit -t           : Reviews config to make sure syntax is OK
* sudo monit reload       : reloads config
* sudo monit status       : Shows status of processes
* sudo monit restart all  : Restarts all services that monit controls
* Details are in /var/log/monit.log


Interesting problems:
        The Pi has no built in battery for a clock. Setting dates/times
                in logfiles isn't helpful.


Still todo:

1. Setup macchanger script to change MAC address and get new IP nightly
        Script is in /home/ubuntu, added to Root's cron
        Log of activity is in /home/ubuntu/log
2. Responder needs to start automatically. Looks like monit hangs sometimes. 
3. System needs to SCP responder logs regularly
4. Setup denyhosts
5. Firewall?
6. Test battery drain
7. Setup Kippo to capture SSH creds/Vuln scan attempts
